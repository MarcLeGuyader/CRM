<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dialogs Module – Preview</title>
  <link rel="stylesheet" href="./dialogs.css">
</head>
<body style="font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,sans-serif;padding:16px">
  <h1>Dialogs Module – Preview</h1>
  <div id="host"></div>
  <div class="btns" style="display:flex;gap:8px;margin:12px 0">
    <button id="btn-opp" class="btn">Open Opportunity</button>
    <button id="btn-co" class="btn">Open Company</button>
    <button id="btn-ct" class="btn">Open Contact</button>
  </div>

  <script type="module">
    import { mountDialogs } from './dialogs.js';

    // minimal name resolvers for preview
    const companyNames = { 'C-001':'Globex', 'C-002':'Initech' };
    const contactNames = { 'P-100':'John Doe', 'P-200':'Jane Roe' };

    const host = document.getElementById('host');
    const dialogs = mountDialogs(host, {
      resolveCompanyName: id => companyNames[id] || '',
      resolveContactName: id => contactNames[id] || ''
    });

    document.getElementById('btn-opp').addEventListener('click', ()=>{
      dialogs.open('opportunity', {
        id:'OPP-000123',
        name:'Migration CRM',
        salesStep:'Negotiation',
        client:'Maello',
        owner:'Marc',
        companyId:'C-001',
        contactId:'P-100',
        closingValue:12000
      });
    });
    document.getElementById('btn-co').addEventListener('click', ()=>{
      dialogs.open('company', { id:'C-001', name:'Globex', contacts:[{id:'P-100', name:'John Doe'}] });
    });
    document.getElementById('btn-ct').addEventListener('click', ()=>{
      dialogs.open('contact', { id:'P-100', name:'John Doe', companyId:'C-001' });
    });
  </script>
</body>
</html>
