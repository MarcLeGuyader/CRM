<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CRM</title>
  <link rel="stylesheet" href="styles/main.css"/>
  <script defer src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <header id="top-banner" class="banner">
    <div class="left">
      <img src="assets/maello-logo.png" alt="Maello logo" class="logo"/>
      <h1 class="title">CRM</h1>
      <button id="btnFilter" class="btn">Filter</button>
      <button id="btnNew" class="btn primary">+ New opportunity</button>
    </div>
    <div class="right">
      <button id="btnDebug" class="btn outline">üêû Debug</button>
      <button id="btnReset" class="btn">Reset</button>
      <button id="btnUpload" class="btn">Upload Excel CRM data</button>
      <button id="btnExport" class="btn">Export Excel CRM</button>
      <button id="btnSave" class="btn success">Save</button>
    </div>
  </header>

  <aside id="filterPanel" class="panel hidden" aria-hidden="true">
    <div class="panel-header">
      <h2>Filters</h2>
      <button id="filterClose" class="btn small">Close</button>
    </div>
    <div class="panel-body">
      <label>Search
        <input type="search" id="filterInput" placeholder="Company, contact, title‚Ä¶"/>
      </label>
      <label>Stage
        <select id="filterStage">
          <option value="">All</option>
          <option>Discovery</option>
          <option>Qualified</option>
          <option>Solution selling</option>
          <option>Negotiation</option>
          <option>Closing</option>
          <option>Won</option>
          <option>Lost</option>
        </select>
      </label>
      <button id="filterClear" class="btn small">Clear</button>
    </div>
  </aside>

  <main class="table-wrapper">
    <table id="opp-table">
      <thead>
        <tr>
          <th>Company / Contact</th>
          <th>Opportunity</th>
          <th>Amount</th>
          <th>Stage</th>
          <th>Owner</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </main>

  <dialog id="dlg">
    <form id="frm" method="dialog">
      <h3 id="dlg-title">New opportunity</h3>
      <div class="grid2">
        <label>ID<input name="Opportunity.ID" id="f-id" readonly></label>
        <label>Title<input name="Opportunity.Name" required></label>
        <label>Company ID<input name="Opportunity.CompanyID"></label>
        <label>Contact ID<input name="Opportunity.ContactID"></label>
        <label>Client<input name="Opportunity.Client"></label>
        <label>Owner<input name="Opportunity.Owner"></label>
        <label>Sales step
          <select name="Opportunity.SalesStep">
            <option>Discovery</option><option>Qualified</option>
            <option>Solution selling</option><option>Negotiation</option>
            <option>Closing</option><option>Won</option><option>Lost</option>
          </select>
        </label>
        <label>Closing value (‚Ç¨)<input name="Opportunity.ClosingValue" type="number" step="0.01"></label>
      </div>
      <menu class="dlg-actions">
        <button id="dlg-cancel" value="cancel" class="btn">Cancel</button>
        <button id="dlg-ok" value="ok" class="btn success">Save</button>
      </menu>
    </form>
  </dialog>

  <section id="debugConsole" class="debug hidden" aria-hidden="true">
    <div class="debug-header">
      <h2>Debug console</h2>
      <button id="dbgClear" class="btn small">Clear</button>
      <button id="dbgHide" class="btn small">Hide</button>
    </div>
    <pre id="debugLog"></pre>
  </section>

  <script type="module" src="app.js"></script>
</body>
</html>
