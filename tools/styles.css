:root{
  --ink:#0b1320;
  --muted:#617387;
  --line:#e1e6eb;
  --bg:#f7fafc;
  --brand:#1e6091;
  --ok:#2f9e44;
  --warn:#c92a2a;
  --violet:#6f42c1;
  --build-tag-css-file: "styles.css";
  --build-tag-css-note: "V4 - debug";
}

*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial,sans-serif}

.wrap{max-width:1200px;margin:24px auto;padding:0 16px}

/* Banner / header */
.banner{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;margin-bottom:16px}
.banner h1{margin:0}
.muted{color:#617387}
.small{font-size:12px}
.grid{display:grid;gap:10px;margin-top:8px}
.grid-4{grid-template-columns:repeat(4,1fr)}
.grid-3{grid-template-columns:repeat(3,1fr)}
label{font-size:12px;color:#334155;display:flex;flex-direction:column;gap:6px}
input,select,textarea{border:1px solid #d8dee6;border-radius:8px;padding:8px;font-size:14px;width:100%}
.row{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px}
button{border:1px solid var(--line);border-radius:8px;background:#fff;padding:8px 12px;cursor:pointer}
button.primary{background:var(--brand);color:#fff;border-color:var(--brand)}
button.ghost{background:transparent;border-color:#c6d2df}
button.danger{background:var(--warn);color:#fff;border-color:var(--warn)}
button:disabled{opacity:.6;cursor:not-allowed}
.status{margin-left:auto;color:#334155}

/* Layout principal */
.main{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.tree-panel,.tools-panel{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px}

/* Arborescence */
.tree{max-height:520px;overflow:auto;border:1px dashed #dbe3ec;border-radius:8px;padding:8px;margin-top:8px;font-family:ui-monospace,monospace;font-size:13px;background:#fff}
.branch{list-style:none;margin:0;padding-left:16px;border-left:1px dashed #e2e8f0}
.branch>li{margin:2px 0}
.node{display:flex;align-items:center;gap:8px;padding:2px 6px;color:#0b1320}
.node .toggle{
  width:16px;
  text-align:center;
  cursor:pointer;
  user-select:none;
  flex:0 0 16px;          /* fixe la largeur du chevron en flex */
}
.node input[type="checkbox"]{
  flex:0 0 auto;          /* évite que la checkbox s'étire */
}
.node .name{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  max-width:calc(100% - 80px);
  display:inline-block;
}


.folder{font-weight:600}

/* Radios (alignement propre input/label) */
.radios{gap:16px}
.radio{display:inline-flex;align-items:center;gap:6px;font-size:14px}
.radio input[type="radio"]{margin:0;inline-size:16px;block-size:16px}

/* Outils : onglets */
.tabs{
  display:flex;gap:8px;margin-bottom:10px;
  border-bottom:1px solid var(--line);
}
.tab-btn{
  border:1px solid var(--line);
  border-bottom:none;
  border-radius:8px 8px 0 0;
  background:#fff;
  padding:8px 12px;
  cursor:pointer;
  font-weight:600;
}
.tab-btn[aria-selected="true"]{
  background:var(--bg);
  color:var(--brand);
  border-color:var(--brand);
}
.tab-panel{
  background:#fff;
  border:1px solid var(--line);
  border-radius:0 8px 8px 8px;
  padding:12px;
}
.tools-panel textarea{
  width:100%;
  height:220px;
  font-family:ui-monospace,SFMono-Regular,Menlo,monospace;
  white-space:pre;
  border:1px solid #d8dee6;border-radius:8px;padding:8px;
  margin-top:8px;
}

/* Console */
.console{background:#fff;border:1px solid var(--line);border-radius:12px;padding:16px;margin:16px 0}
.console-header{display:flex;align-items:center;gap:8px;justify-content:space-between}
pre#log{
  background:#0b1220;color:#e6edf3;border-radius:8px;
  padding:10px;max-height:260px;overflow:auto;margin:0
}
.log-line{white-space:pre-wrap}
.tag{display:inline-block;padding:1px 6px;border-radius:999px;font-size:11px;margin-right:6px}
.tag.DRYRUN{background:var(--violet);color:#fff}
.tag.APPLY{background:#1f6feb;color:#fff}
.tag.WARN{background:#e3a008;color:#000}
.tag.ERROR{background:#b91c1c;color:#fff}
.tag.SUMMARY{background:#16a34a;color:#fff}

/* Petits écrans */
@media (max-width:900px){
  .grid-4{grid-template-columns:1fr 1fr}
  .main{grid-template-columns:1fr}
  .node .name{max-width:100%}
}


/* ==== DEBUG MODE (temporaire) ==== */
.node { outline: 1px dashed #f59e0b; }
.node .toggle { outline: 1px solid #22c55e; }
.node input[type="checkbox"] { outline: 1px solid #06b6d4; }
.node .name { background: rgba(255, 255, 0, .2); outline: 1px solid #ef4444; }
